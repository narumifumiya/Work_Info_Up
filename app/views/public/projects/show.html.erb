<div class="container">
  <h2 class="text-center mb-5">プロジェクト詳細</h2>
  <div class="row">

    <div class="col-md-6 text-center">
      <%= image_tag @project.get_project_image(300,300) %>
    </div>

    <div class="col-md-6">
      <p>プロジェクト名：<%= @project.name %></p>
      <p>期間：<%= @project.start_date %> 〜 <%= @project.end_date %></p>
      <p>受注ステータス：
        <% if @project.order_status == "under_negotiation" %>
          <span class="text-secondary font-weight-bold"><%= @project.order_status_i18n %></span>
        <% elsif @project.order_status == "ordered" %>
          <span class="text-success font-weight-bold"><%= @project.order_status_i18n %></span>
        <% else %>
          <span class="text-danger font-weight-bold"><%= @project.order_status_i18n %></span>
        <% end %>
      </p>
      <p>進捗ステータス：
        <% if @project.progress_status == "not_started_yet" %>
          <span class="text-secondary font-weight-bold"><%= @project.progress_status_i18n %></span>
        <% elsif @project.progress_status == "while_working" %>
          <span class="text-primary font-weight-bold"><%= @project.progress_status_i18n %></span>
        <% else %>
          <span class="text-success font-weight-bold"><%= @project.progress_status_i18n %></span>
        <% end %>
      </p>
      <p>説明：<%= @project.introduction %></p>
      <% if @project.favorited_by?(current_user) %>
        <p>
          <%= link_to company_project_favorites_path(@company, @project), method: :delete do %>
            ♥<%= @project.favorites.count %> いいね
          <% end %>
        </p>
      <% else %>
        <p>
          <%= link_to company_project_favorites_path(@company, @project), method: :post do %>
            ♡<%= @project.favorites.count %> いいね
          <% end %>
        </p>
      <% end %>

      <div>
        <% if @project.user_id == current_user.id %>
          <%= link_to "編集", edit_company_project_path(@company, @project), class: "btn btn-sm btn-success"%>
        <% end %>
      </div>
    </div>

  </div>

  <div class="mt-5">
    <p>コメント件数：<%= @project.project_comments.count %></p>
    <table>
    <% @project.project_comments.each do |project_comment| %>
      <tr>
        <td>
          <%= link_to public_user_path(project_comment.user) do %>
          <%= image_tag project_comment.user.get_profile_image(100, 100) %><br>
          <%= project_comment.user.name %>
          <% end %>
        </td>
        <td><%= project_comment.comment %></td>
        <% if project_comment.user == current_user %>
        <td><%= link_to "Destroy", company_project_project_comment_path(project_comment.project.company,project_comment.project,project_comment),method: :delete, remote: true, class: "btn btn-sm btn-danger" %></td>
        <% end %>
      </tr>
    <% end %>
  </table>
  </div>

  <div class="mt-5">
    <%= form_with model: [@company, @project, @project_comment] do |f| %>
    <div class="form-group", style="width:100%;">
      <%= f.text_area :comment, rows: '5', placeholder: "コメントをここに", class: "form-control" %>
    </div>

      <%= f.submit "送信" %>
    <% end %>
  </div>

  <div class="row mt-5">
    <div class="col-md-9 mx-auto">
    <p class="text-center"><%= link_to "一覧へ戻る", company_projects_path(@company) %></p>
    </div>
  </div>

</div>