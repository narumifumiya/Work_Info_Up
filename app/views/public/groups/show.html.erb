<div class="container">
  <h2 class="text-center">グループ詳細</h2>

  <div class="row mt-5">
    <div class="col-md-6 text-center mb-3">
      <%= image_tag @group.get_group_image(300,300) %>
    </div>

    <div class="col-8 col-md-6 mx-auto">
      <p>グループ名：<%= @group.name %></p>
      <p>紹介文：<%= @group.introduction %></p>

      <!-- @groupに紐づいたgroup_user（user_idカラムに自分のIDを持っている）があるかどうかを確かめる。-->
      <% if @group.group_users.exists?(user_id: current_user.id) %>
        <!-- group_usersコントローラーの#destroyアクションを発動　@groupからgroup_user(自分)を消す -->
        <p><%= link_to 'グループを退出する', group_group_users_path(@group), method: :delete, class: "btn btn-sm btn-danger" %></p>
      <% else %>
      <!-- group_usersコントローラーの#createアクションを発動　@groupにgroup_user(自分)を追加する -->
        <p><%= link_to 'グループに参加する', group_group_users_path(@group), method: :post, class: "btn btn-sm btn-success" %></p>
      <% end %>

      <% if @group.owner_id == current_user.id %>
        <p>
          <%= link_to 'Edit', edit_group_path(@group), class: "btn btn-sm btn-success" %>
        </p>
      <% end %>
    </div>

  </div>

  <div class="row mt-5">
    <div class="col-11 col-md-12 mx-auto">
      <h4>メンバー</h4>

      <%= render 'public/users/index', users: @group.users %>

    </div>
  </div>

</div>